.panel.panel-primary
 .panel-heading
  .title-container
   %h4= @title
  .button-container
   %button{:id=>'refresh', :type=>'button', :class=>'btn btn-success'}="Refresh"
 %table.table
  %tr
   %th= "Date"
   %th= "Platform"
   %th= "Server"
   %th= "App"
   %th= "Type"
   %th= "Locale"
   %th= "Branch"
   %th= "Suite"
   %th= "Tests"
   %th= "User"
   %th{:style=>"text-align: center"}= "Report"
   %th= "Build"
  -@reports.each do |r|
   %tr{:recordId=>r.id}
    %td= r.date.strftime("%d %b, %H:%M")
    %td= r.platform
    %td= r.server
    %td= r.appid
    %td= r.app_type
    %td= r.locale
    %td= r.branch
    %td= r.suite
    %td= r.tests.gsub(",", " ") unless r.tests.nil?
    %td= r.user
    %td{:style=>"text-align: center"}
     %div
      %a{:href=>r.link, :target=>"_blank"}
       -unless r.failed.nil? && r.all.nil?
       -passed = (r.all.to_f - r.failed.to_f).to_i
        -if r.failed.to_f/r.all.to_f*100 > 25
         %span{:class=>"label label-danger result"}="#{passed}/#{r.all}"
        -elsif r.failed.to_f/r.all.to_f*100 <= 25 && r.failed.to_f/r.all.to_f*100 < 100 && r.failed.to_f != 0
         %span{:class=>"label label-warning result"}="#{passed}/#{r.all}"
        -else
         %span{:class=>"label label-success result"}="#{r.all}/#{r.all}"
     %div
      %span{:class=>"label label-info rerun"}= "rerun"
    %td= link_to "#{r.job} ##{r.build}", r.buildurl, :target => "_blank"
    %td{:style=>"text-align: center"}
     %div
      %span{:class=>"label label-danger deleteButton"}= "delete"
     %div
      %span{:class=>"label label-info reply"}= "reply"
